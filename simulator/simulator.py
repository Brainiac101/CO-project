import sys
import rtype as r
import btype as b
import bonus as bon
# import itype as i
# import jtype as j
# import stype as s
# import utype as u
def db(decimal_num):
    if decimal_num < 0:
        abs_decimal = abs(decimal_num)
        complement = 2**32 - abs_decimal
    else:
        complement = decimal_num

    twos = bin(complement)[2:]
    
    if len(twos) < 32:
        twos = '0' * (32 - len(twos)) + twos

    return twos

def write(fout):
    str1='0b'+db(pc)+' '
    for i in d:
        str1+=('0b'+d[i]+' ')
    str1.rstrip()
    str1+='\n'
    fout.write(str1)

rtype=["0110011"]
itype=["0000011","0010011","1100111"] 
btype=["1100011"]
jtype=["1101111"]
utype=["0110111","0010111"]
stype=["0100011"]
bonus=["0000000"]
datamem={'0x00001000': '00000000000000000000000000000000', '0x00001004': '00000000000000000000000000000000', '0x00001008': '00000000000000000000000000000000', '0x0000100c': '00000000000000000000000000000000', '0x00001010': '00000000000000000000000000000000', '0x00001014': '00000000000000000000000000000000', '0x00001018': '00000000000000000000000000000000', '0x0000101c': '00000000000000000000000000000000', '0x00001020': '00000000000000000000000000000000','0x00001024': '00000000000000000000000000000000', '0x00001028': '00000000000000000000000000000000', '0x0000102c': '00000000000000000000000000000000', '0x00001030': '00000000000000000000000000000000', '0x00001034': '00000000000000000000000000000000', '0x00001038': '00000000000000000000000000000000','0x0000103c': '00000000000000000000000000000000', '0x00001040': '00000000000000000000000000000000', '0x00001044': '00000000000000000000000000000000', '0x00001048': '00000000000000000000000000000000', '0x0000104c': '00000000000000000000000000000000', '0x00001050': '00000000000000000000000000000000', '0x00001054': '00000000000000000000000000000000', '0x00001058': '00000000000000000000000000000000', '0x0000105c': '00000000000000000000000000000000', '0x00001060': '00000000000000000000000000000000', '0x00001064': '00000000000000000000000000000000', '0x00001068': '00000000000000000000000000000000', '0x0000106c': '00000000000000000000000000000000', '0x00001070': '00000000000000000000000000000000', '0x00001074': '00000000000000000000000000000000', '0x00001078': '00000000000000000000000000000000', '0x0000107c': '00000000000000000000000000000000'}

d={"00000":"00000000000000000000000000000000" ,"00001":"00000000000000000000000000000000","00010":"00000000000000000000000100000000","00011":"00000000000000000000000000000000","00100":"00000000000000000000000000000000","00101":"00000000000000000000000000000000","00110":"00000000000000000000000000000000","00111":"00000000000000000000000000000000","01000":"00000000000000000000000000000000", "01001":"00000000000000000000000000000000","01010":"00000000000000000000000000000000","01011":"00000000000000000000000000000000","01100":"00000000000000000000000000000000","01101":"00000000000000000000000000000000","01110":"00000000000000000000000000000000","01111":"00000000000000000000000000000000","10000":"00000000000000000000000000000000","10001":"00000000000000000000000000000000","10010":"00000000000000000000000000000000","10011":"00000000000000000000000000000000","10100":"00000000000000000000000000000000","10101":"00000000000000000000000000000000","10110":"00000000000000000000000000000000","10111":"00000000000000000000000000000000","11000":"00000000000000000000000000000000","11001":"00000000000000000000000000000000","11010":"00000000000000000000000000000000","11011":"00000000000000000000000000000000","11100":"00000000000000000000000000000000","11101":"00000000000000000000000000000000","11110":"00000000000000000000000000000000","11111":"00000000000000000000000000000000"}
fin=open(sys.argv[1])
fout=open(sys.argv[2])
a=fin.readlines()
length=len(a)
pc=0
for i in range(length):
    if i!=pc/4:
        i=pc/4
    if a[i][25:32] in rtype:
        d=r.check(a[i][:-1], d)
        pc=pc+4
    elif a[i][25:32] in btype:
        pc=b.check(a[i][:-1],d,pc)
    elif a[i][25:32] in itype:
        #i.check(a[i][:-1],d,pc)
        fout.write('\n')
    elif a[i][25:32] in jtype:
        t=j.check(a[i][:-1],d,pc)
        d=t[0]
        pc=t[1]
    elif a[i][25:32] in stype:
        fout.write('\n')
        #s.check(a[i][:-1],d,pc)
    elif a[i][25:32] in utype:
        d=u.check(a[i][:-1], d,pc)
        pc=pc+4
    elif a[i][25:32] in bon:
        d=bon.check(a[i][:-1],d,pc)
    write(fout)
str2=''
for i in datamem:
    str2+=(i+': '+datamem[i]+'\n')
str2.rstrip()
fout.write(str2)
